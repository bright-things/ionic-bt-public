/*
 * ath79_stereo_regs.h
 *
 *  Created on: Feb 7, 2015
 *      Author: franz
 */

#ifndef _ATH79_STEREO_REGS_H_
#define _ATH79_STEREO_REGS_H_

#define AR934X_STEREO_BASE	(AR71XX_APB_BASE + 0x000B0000)
#define AR934X_STEREO_SIZE	0x18

#define	AR934X_STEREO_REG_CONFIG			0x00
#define	AR934X_STEREO_CONFIG_SPDIF_ENABLE		BIT(23)
#define AR934X_STEREO_CONFIG_I2S_ENABLE			BIT(21)
#define AR934X_STEREO_CONFIG_MIC_RESET			BIT(20)
#define AR934X_STEREO_CONFIG_RESET			BIT(19)
#define AR934X_STEREO_CONFIG_I2S_DELAY			BIT(18)
#define AR934X_STEREO_CONFIG_PCM_SWAP			BIT(17)
#define AR934X_STEREO_CONFIG_MIC_WORD_SIZE		BIT(16)
#define AR934X_STEREO_CONFIG_STEREO_MONO_SHIFT		14
#define AR934X_STEREO_CONFIG_STEREO_MONO_MASK		0x03
#define AR934X_STEREO_CONFIG_STEREO_MONO_STEREO		0
#define AR934X_STEREO_CONFIG_STEREO_MONO_CH0		1
#define AR934X_STEREO_CONFIG_STEREO_MONO_CH1		2

#define AR934X_STEREO_CONFIG_DATA_WORD_SIZE_SHIFT	12
#define AR934X_STEREO_CONFIG_DATA_WORD_SIZE_MASK	0x03
#define AR934X_STEREO_CONFIG_DATA_WORD_8		0
#define AR934X_STEREO_CONFIG_DATA_WORD_16		1
#define AR934X_STEREO_CONFIG_DATA_WORD_24		2
#define AR934X_STEREO_CONFIG_DATA_WORD_32		3

#define AR934X_STEREO_CONFIG_I2S_WORD_SIZE		BIT(11)
#define AR934X_STEREO_CONFIG_MCK_SEL			BIT(10)
#define AR934X_STEREO_CONFIG_SAMPLE_CNT_CLEAR_TYPE	BIT(9)
#define AR934X_STEREO_CONFIG_MASTER			BIT(8)
#define AR934X_STEREO_CONFIG_POSEDGE_SHIFT		0
#define AR934X_STEREO_CONFIG_POSEDGE_MASK		0xff
#define AR934X_STEREO_CONFIG_PSEDGE(x)			(AR934X_STEREO_CONFIG_POSEDGE_MASK&x)

#define AR934X_STEREO_CONFIG_CLK_DIV 		0x1c

#define	AR934X_STEREO_REG_VOLUME			0x04

#define AR934X_STEREO_VOLUME_CH0			8
#define AR934X_STEREO_VOLUME_CH1			0
#define AR934X_STEREO_VOLUME_MASK			0x1f

#define	AR934X_STEREO_REG_MASTER_CLOCK			0x08
#define	AR934X_STEREO_REG_TX_SAMPLE_CNT_LSB		0x0c
#define	AR934X_STEREO_REG_TX_SAMPLE_CNT_MSB		0x10
#define	AR934X_STEREO_REG_RX_SAMPLE_CNT_LSB		0x14
#define	AR934X_STEREO_REG_RX_SAMPLE_CNT_MSB 		0x18


/*
 * DMA block (MBOX/PCM)
 */
#define AR934X_DMA_BASE		(AR71XX_APB_BASE + 0x000A0000)
#define AR934X_DMA_SIZE		0x6C

#define ATH79_MISC_IRQ_DMA	(ATH79_MISC_IRQ_BASE + 7)

#define AR934X_DMA_REG_MBOX_FIFO			0x00
#define AR934X_DMA_REG_MBOX_FIFO_STATUS			0x08
#define AR934X_DMA_REG_SLIC_MBOX_FIFO_STATUS		0x0c
#define AR934X_DMA_REG_MBOX_DMA_POLICY			0x10

#define AR934X_DMA_MBOX_DMA_POLICY_TX_FIFO_THRESH_SHIFT	4
#define AR934X_DMA_MBOX_DMA_POLICY_TX_FIFO_THRESH_MASK	0xf
#define AR934X_DMA_MBOX_DMA_POLICY_TX_QUANTUM		BIT(3)
#define AR934X_DMA_MBOX_DMA_POLICY_RX_QUANTUM		BIT(1)

#define AR934X_DMA_REG_SLIC_MBOX_DMA_POLICY		0x14
#define AR934X_DMA_REG_MBOX0_DMA_RX_DESCRIPTOR_BASE	0x18
#define AR934X_DMA_REG_MBOX0_DMA_RX_CONTROL		0x1c
#define AR934X_DMA_REG_MBOX0_DMA_TX_DESCRIPTOR_BASE	0x20
#define AR934X_DMA_REG_MBOX0_DMA_TX_CONTROL		0x24
#define AR934X_DMA_REG_MBOX1_DMA_RX_DESCRIPTOR_BASE	0x28
#define AR934X_DMA_REG_MBOX1_DMA_RX_CONTROL		0x2c
#define AR934X_DMA_REG_MBOX1_DMA_TX_DESCRIPTOR_BASE	0x30
#define AR934X_DMA_REG_MBOX1_DMA_TX_CONTROL		0x34

#define AR934X_DMA_MBOX_DMA_CONTROL_RESUME		BIT(2)
#define AR934X_DMA_MBOX_DMA_CONTROL_START		BIT(1)
#define AR934X_DMA_MBOX_DMA_CONTROL_STOP		BIT(0)

#define AR934X_DMA_REG_MBOX_FRAME			0x38
#define AR934X_DMA_REG_SLIC_MBOX_FRAME			0x3c
#define AR934X_DMA_REG_FIFO_TIMEOUT			0x40
#define AR934X_DMA_REG_MBOX_INT_STATUS			0x44
#define AR934X_DMA_REG_SLIC_MBOX_INT_STATUS		0x48

#define AR934X_DMA_MBOX_INT_STATUS_RX_DMA_COMPLETE	BIT(10)
#define AR934X_DMA_MBOX_INT_STATUS_TX_DMA_COMPLETE	BIT(6)

#define AR934X_DMA_REG_MBOX_INT_ENABLE			0x4c
#define AR934X_DMA_REG_SLIC_MBOX_INT_ENABLE		0x50

#define AR934X_DMA_MBOX1_INT_RX_COMPLETE		BIT(11)
#define AR934X_DMA_MBOX0_INT_RX_COMPLETE		BIT(10)
#define AR934X_DMA_MBOX1_INT_TX_EOM_COMPLETE		BIT(9)
#define AR934X_DMA_MBOX0_INT_TX_EOM_COMPLETE		BIT(8)
#define AR934X_DMA_MBOX1_INT_TX_COMPLETE		BIT(7)
#define AR934X_DMA_MBOX0_INT_TX_COMPLETE		BIT(6)

#define AR934X_DMA_REG_MBOX_FIFO_RESET			0x58
#define AR934X_DMA_REG_SLIC_MBOX_FIFO_RESET		0x5c

#define AR934X_DMA_MBOX_FIFO_RESET_ALL			0xff
#define AR934X_DMA_MBOX1_FIFO_RESET_RX			BIT(3)
#define AR934X_DMA_MBOX0_FIFO_RESET_RX			BIT(2)
#define AR934X_DMA_MBOX1_FIFO_RESET_TX			BIT(1)
#define AR934X_DMA_MBOX0_FIFO_RESET_TX			BIT(0)

#endif /* _ATH79_STEREO_REGS_H_ */
